{"remainingRequest":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\babel-loader\\lib\\index.js!D:\\111study\\web\\js_vue\\ewshop\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\111study\\web\\js_vue\\ewshop\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\111study\\web\\js_vue\\ewshop\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\111study\\web\\js_vue\\ewshop\\src\\views\\home\\Home.vue?vue&type=template&id=3dd2e005&scoped=true","dependencies":[{"path":"D:\\111study\\web\\js_vue\\ewshop\\src\\views\\home\\Home.vue","mtime":1614936346849},{"path":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\111study\\web\\js_vue\\ewshop\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwppbXBvcnQgX2ltcG9ydHNfMCBmcm9tICdhc3NldHMvaW1hZ2VzLzEucG5nJzsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTNkZDJlMDA1Iik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi0zZGQyZTAwNSIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgaWQ6ICJob21lIgp9OwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi5Zu+5Lmm5ZWG5Z+OIik7Cgp2YXIgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogIndyYXBwZXIiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAiY29udGVudCIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiYmFubmVycyIKfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImltZyIsIHsKICBzcmM6IF9pbXBvcnRzXzAKfSldLCAtMQovKiBIT0lTVEVEICovCik7CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfbmF2X2JhciA9IF9yZXNvbHZlQ29tcG9uZW50KCJuYXYtYmFyIik7CgogIHZhciBfY29tcG9uZW50X3JlY29tbWVuZF92aWV3ID0gX3Jlc29sdmVDb21wb25lbnQoInJlY29tbWVuZC12aWV3Iik7CgogIHZhciBfY29tcG9uZW50X3RhYl9jb250cm9sID0gX3Jlc29sdmVDb21wb25lbnQoInRhYi1jb250cm9sIik7CgogIHZhciBfY29tcG9uZW50X2dvb2RzX2xpc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZ29vZHMtbGlzdCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9uYXZfYmFyLCBudWxsLCB7CiAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfaG9pc3RlZF8yXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfaG9pc3RlZF81LCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yZWNvbW1lbmRfdmlldywgewogICAgcmVjb21tZW5kczogJHNldHVwLnJlY29tbWVuZHMKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsicmVjb21tZW5kcyJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfdGFiX2NvbnRyb2wsIHsKICAgIHRpdGxlczogWyfnlYXplIAnLCAn5paw5LmmJywgJ+eyvumAiSddLAogICAgb25UYWJDbGljazogJHNldHVwLnRhYkNsaWNrawogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJvblRhYkNsaWNrIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9nb29kc19saXN0LCB7CiAgICBnb29kczogJHNldHVwLnNob3dHb29kcwogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJnb29kcyJdKV0pXSldKTsKfSk7"},{"version":3,"sources":["D:\\111study\\web\\js_vue\\ewshop\\src\\views\\home\\Home.vue"],"names":[],"mappings":";OAO0C,U,MAA0B,qB;;;;;;;AAN3D,EAAA,EAAE,EAAC;;;+CAEyB,M;;;AAExB,EAAA,KAAK,EAAC;;;AACF,EAAA,KAAK,EAAC;;;8BACP,YAAA,CAA6D,KAA7D,EAA6D;AAAxD,EAAA,KAAK,EAAC;AAAkD,CAA7D,EAAoB,C,aAAC,YAAA,CAAkC,KAAlC,EAAkC;AAA7B,EAAA,GAA0B,EAA1B;AAA6B,CAAlC,CAAD,CAApB,E;;AAAA,C;;;;;;;;;;;;;uBANZ,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAdF,YAAA,CAEU,kBAFV,EAEU,IAFV,EAEU;AADW,IAAA,OAAO,EAAA,OAAA,CAAC;AAAA,aAAI,C,UAAA,CAAJ;AAAA,KAAD,CAClB;;;;AAAA,GAFV,CAcE,EAXF,YAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATF,YAAA,CAQM,KARN,EAAA,UAAA,EAQM,CAPF,UAOE,EANF,YAAA,CAA0D,yBAA1D,EAA0D;AAAzC,IAAA,UAAU,EAAE,MAAA,CAAA;AAA6B,GAA1D,EAAuC,IAAvC,EAAuC;AAAA;AAAvC,IAAuC,CAAA,YAAA,CAAvC,CAME,EALF,YAAA,CAGe,sBAHf,EAGe;AAFV,IAAA,MAAM,EAAE,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAEE;AADV,IAAA,UAAQ,EAAE,MAAA,CAAA;AACA,GAHf,E,IAAA,E;;AAAA,I,cAAA,CAKE,EADF,YAAA,CAA4C,qBAA5C,EAA4C;AAA/B,IAAA,KAAK,EAAE,MAAA,CAAA;AAAwB,GAA5C,EAA6B,IAA7B,EAA6B;AAAA;AAA7B,IAA6B,CAAA,OAAA,CAA7B,CACE,CARN,CASE,CAVN,CAWE,CAfN,C","sourcesContent":["<template>\n    <div id=\"home\">\n        <nav-bar>\n            <template v-slot:default>图书商城</template>\n        </nav-bar>\n        <div class=\"wrapper\">\n            <div class=\"content\">\n                <div class=\"banners\"><img src=\"~assets/images/1.png\" /></div>\n                <recommend-view :recommends=\"recommends\"></recommend-view>\n                <tab-control\n                    :titles=\"['畅销', '新书', '精选']\"\n                    @tabClick=\"tabClickk\"\n                ></tab-control>\n                <goods-list :goods=\"showGoods\"></goods-list>\n            </div>\n        </div>\n    </div>\n</template>                                     \n\n<script>\nimport NavBar from \"components/common/navbar/NavBar\";\nimport RecommendView from \"views/home/ChildComps/RecommendView\";\nimport tabControl from \"components/content/tabControl/tabControl\";\nimport GoodsList from \"components/content/goods/GoodsList\";\nimport { getHomeAllData, getHomeGoods } from \"network/home\";\nimport { ref, reactive, onMounted, computed,watchEffect,nextTick} from \"vue\";\nimport BScroll from 'better-scroll';\n\nexport default {\n    name: \"Home\",\n    setup() {\n        const recommends = ref([]);\n\n        //商品列表数据模型\n        const goods = reactive({\n            sales: { page: 0, list: [] },\n            new: { page: 0, list: [] },\n            recommend: { page: 0, list: [] },\n        });\n\n        let currentType = ref(\"sales\");\n        const showGoods = computed(() => {\n            return goods[currentType.value].list;\n        });\n\n        let bscroll=reactive({});\n\n        onMounted(() => {\n            getHomeAllData().then((res) => {\n               \n                recommends.value = res.goods.data;\n            });\n\n            getHomeGoods(\"sales\").then((res) => {\n                console.log(res);\n                goods.sales.list = res.goods.data;\n            });\n            getHomeGoods(\"recommend\").then((res) => {\n                goods.recommend.list = res.goods.data;\n            });\n            getHomeGoods(\"new\").then((res) => {\n                goods.new.list = res.goods.data;\n            });\n\n            // 创建betterscroll对象\n            bscroll = new BScroll(document.querySelector(\".wrapper\"), {\n                \n                probeType: 3,//只要在运动就触发scroll事件\n                click: true,//是否允许点击\n                pullUpLoad:true//上拉加载更多，默认为false\n            });\n\n            // 触发滚动事件\n            bscroll.on('scroll',(position)=>{\n                console.log(position.y);\n            })\n\n            //上拉加载数据，触发pullingup\n            bscroll.on(\"pullingup\",()=>{\n                console.log(lamore);\n                \n            })\n        });\n\n        const tabClickk = (index) => {\n            let type = [\"sales\", \"new\", \"recommend\"];\n            currentType.value = type[index];\n        };\n\n        //监听任何一个变量有变化\n        watchEffect(()=>{\n            nextTick(()=>{\n                //重新计算高度\n                bscroll&&bscroll.refresh();\n            })\n        })\n        return {\n            recommends,\n            tabClickk,\n            goods,\n            currentType,\n            showGoods,\n        };\n    },\n    components: {\n        NavBar,\n        RecommendView,\n        tabControl,\n        GoodsList,\n    },\n};\n</script>\n\n<style scoped>\n.banners img {\n    width: 100%;\n    height: auto;\n    margin-top: 45px;\n}\n#home {\n    height: 100vh;\n    position: relative;\n}\n.wrapper {\n    position: absolute;\n    top: 45px;\n    bottom: 50px;\n    left: 0;\n    right: 0;\n    overflow: hidden;\n}\n.content {\n    \n}\n</style>\n"],"sourceRoot":""}]}